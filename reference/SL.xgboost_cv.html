<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>XGBoost SuperLearner wrapper with internal cross-validation for early-stopping — SL.xgboost_cv • ck37r</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">ck37r</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ck37/ck37r">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>XGBoost SuperLearner wrapper with internal cross-validation for early-stopping</h1>
    </div>

    
    <p>Supports the Extreme Gradient Boosting package for SuperLearnering, which is
a variant of gradient boosted machines (GBM). Conducts internal cross-validation
and stops when performance plateaus.</p>
    

    <pre class="usage"><span class='fu'>SL.xgboost_cv</span>(<span class='no'>Y</span>, <span class='no'>X</span>, <span class='no'>newX</span>, <span class='no'>family</span>, <span class='no'>obsWeights</span>, <span class='no'>id</span>, <span class='kw'>ntrees</span> <span class='kw'>=</span> <span class='fl'>5000L</span>,
  <span class='kw'>early_stopping_rounds</span> <span class='kw'>=</span> <span class='fl'>200L</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>5L</span>, <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>4L</span>,
  <span class='kw'>shrinkage</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>minobspernode</span> <span class='kw'>=</span> <span class='fl'>10L</span>, <span class='kw'>subsample</span> <span class='kw'>=</span> <span class='fl'>0.7</span>,
  <span class='kw'>colsample_bytree</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>gamma</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>stratified</span> <span class='kw'>=</span> <span class='no'>T</span>,
  <span class='kw'>eval_metric</span> <span class='kw'>=</span> <span class='fu'>ifelse</span>(<span class='no'>family</span>$<span class='no'>family</span> <span class='kw'>==</span> <span class='st'>"binomial"</span>, <span class='st'>"auc"</span>, <span class='st'>"rmse"</span>),
  <span class='kw'>print_every_n</span> <span class='kw'>=</span> <span class='fl'>400L</span>, <span class='kw'>nthread</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>save_period</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Y</th>
      <td><p>Outcome variable</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>Covariate dataframe</p></td>
    </tr>
    <tr>
      <th>newX</th>
      <td><p>Optional dataframe to predict the outcome</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>"gaussian" for regression, "binomial" for binary
classification, "multinomial" for multiple classification (not yet supported).</p></td>
    </tr>
    <tr>
      <th>obsWeights</th>
      <td><p>Optional observation-level weights (supported but not tested)</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>Optional id to group observations from the same unit (not used
currently).</p></td>
    </tr>
    <tr>
      <th>ntrees</th>
      <td><p>How many trees to fit. Low numbers may underfit but high
numbers may overfit, depending also on the shrinkage.</p></td>
    </tr>
    <tr>
      <th>early_stopping_rounds</th>
      <td><p>If performance has not improved in this many
rounds, stop.</p></td>
    </tr>
    <tr>
      <th>nfold</th>
      <td><p>Number of internal cross-validation folds.</p></td>
    </tr>
    <tr>
      <th>max_depth</th>
      <td><p>How deep each tree can be. 1 means no interactions, aka tree
stubs.</p></td>
    </tr>
    <tr>
      <th>shrinkage</th>
      <td><p>How much to shrink the predictions, in order to reduce
overfitting.</p></td>
    </tr>
    <tr>
      <th>minobspernode</th>
      <td><p>Minimum observations allowed per tree node, after which
no more splitting will occur.</p></td>
    </tr>
    <tr>
      <th>subsample</th>
      <td><p>Observation sub-sampling, to reduce tree correlation.</p></td>
    </tr>
    <tr>
      <th>colsample_bytree</th>
      <td><p>Column sub-sampling, to reduce tree correlation.</p></td>
    </tr>
    <tr>
      <th>gamma</th>
      <td><p>Metric for node-splitting, higher values result in less complex trees.</p></td>
    </tr>
    <tr>
      <th>stratified</th>
      <td><p>If stratified sampling should be used for binary outcomes, defaults
to T.</p></td>
    </tr>
    <tr>
      <th>eval_metric</th>
      <td><p>Metric to use for early-stopping, defaults to AUC for
classification and RMSE for regression.</p></td>
    </tr>
    <tr>
      <th>print_every_n</th>
      <td><p>Print estimation status every n rounds.</p></td>
    </tr>
    <tr>
      <th>nthread</th>
      <td><p>How many threads (cores) should xgboost use. Generally we want
to keep this to 1 so that XGBoost does not compete with SuperLearner
parallelization.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Verbosity of XGB fitting.</p></td>
    </tr>
    <tr>
      <th>save_period</th>
      <td><p>How often (in tree iterations) to save current model to
disk during processing. If NULL does not save model, and if 0 saves model
at the end.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Any remaining arguments (not used).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The performance of XGBoost, like GBM, is sensitive to the configuration
settings. Therefore it is best to create multiple configurations using
create.SL.xgboost and allow the SuperLearner to choose the best weights based
on cross-validated performance.</p>
<p>If you run into errors please first try installing the latest version of
XGBoost from drat as described here:
<a href='https://github.com/dmlc/xgboost/blob/master/doc/build.md#r-package-installation'>https://github.com/dmlc/xgboost/blob/master/doc/build.md#r-package-installation</a></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Chris Kennedy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
